generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String          @id @default(uuid())
  email         String          @unique
  name          String?
  createdAt     DateTime        @default(now())
  updatedAt     DateTime        @updatedAt
  questionaries Questionnaire[]
}

model Questionnaire {
  id         String     @id @default(uuid())
  title      String
  link       String     @unique
  createdAt  DateTime   @default(now())
  updatedAt  DateTime   @updatedAt
  user       User       @relation(fields: [userId], references: [id])
  userId     String
  template   Template   @relation(fields: [templateId], references: [id])
  templateId String
  responses  Response[]
}

model Template {
  id              String          @id @default(uuid())
  title           String
  questionnaireId String
  createdAt       DateTime        @default(now())
  updatedAt       DateTime        @updatedAt
  questions       Question[]
  questionnaire   Questionnaire[]
}

model Question {
  id           String       @id @default(uuid())
  title        String
  questionType QuestionType
  createdAt    DateTime     @default(now())
  updatedAt    DateTime     @updatedAt
  Template     Template?    @relation(fields: [templateId], references: [id])
  templateId   String?
  order        Int
}

model Response {
  id              String        @id @default(uuid())
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
  questionnaireId String
  questionnaire   Questionnaire @relation(fields: [questionnaireId], references: [id])
  answerId        String
  answer          Json
}

enum QuestionType {
  SHORT_ANSWER
  PARAGRAPH
  CHECKBOX
  MULTIPLE_CHOICE
  DROPDOWN
}
